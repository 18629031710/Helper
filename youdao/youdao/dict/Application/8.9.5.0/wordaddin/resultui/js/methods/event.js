/* generated @ 2018-11-1 14:16:32*/
"use strict";define(function(){function n(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"original",i=$("#docOriginalScroll"),a=$("#docTranslationScroll"),o="",t="",l="",e="",r="",d="",c=0,s=0;"original"==n?(o=i,t=a):(o=a,t=i),l=o.find("p.paragraph");for(var g=l.eq(0)[0].offsetTop,u=0;u<l.length;u++){e=l.eq(u);var m=e[0].offsetTop;if(m>=o.scrollTop()&&o.scrollTop()>g){d=e.attr("data-id"),s=m-o.scrollTop();break}c=o.scrollTop(),d=""}return""==d?void t.scrollTop(c):(r=t.find('p[data-id="'+d+'"]'),void(r.length&&(c=r[0].offsetTop,t.animate({scrollTop:c-s},10))))}function i(n){var i={"*":"\\*",".":"\\.","?":"\\?","+":"\\+",$:"\\$","^":"\\^","[":"\\[","]":"\\]","{":"\\{","}":"\\}","|":"\\|","/":"\\/","(":"\\(",")":"\\)"};return String(n).replace(/[()]/g,function(n){return i[n]})}var a={imgClick:function(){$("#app").delegate(".img-con","click",function(n){var i=$(this),a=$(this).find("img").attr("data-url");if(a){i.find(".img-load").removeClass("click-load").addClass("click-loading").text("图片加载中...");var o=new Image;o.onload=function(){var n=i.find("img").attr("data-id");$('img[data-id="'+n+'"]').attr("src",a);for(var t=0;t<$('img[data-id="'+n+'"]').length;t++){var l=$('img[data-id="'+n+'"]').eq(t);l.parent(".img-con").find(".img-load").addClass("click-load").removeClass("click-loading"),l.parent(".img-con").find(".img-load").hide(),l.parent(".img-con").addClass("img-loaded")}o.onload=null,o.onerror=null,o=null},o.onerror=function(){i.find(".img-load").addClass("click-load").removeClass("click-loading"),i.find(".img-load").show().text("加载失败，点击刷新"),o.onload=null,o.onerror=null,o=null},o.src=a}})},spanHover:function(){$("#app").off("mouseenter mouseleave").on("mouseenter mouseleave","span.run__con",function(n){var a=$(this),o=a.data("id"),t=$("[data-id="+o+"]"),l=$("#app_original").find("[data-id="+o+"]"),e=l.attr("data-sumText"),r=l.text()||"",d=e.match(new RegExp(i(r),"g"))?e.match(new RegExp(i(r),"g")).length:1;"mouseenter"==n.type&&r&&r.length>0?(t.addClass("highlight"),window.external.doContrast($.trim(r),d)):(t.removeClass("highlight"),window.external.cancelContrast())})},listenScroll:function(){var i="",a="",o=!1,t=!1,l="";$("#docOriginalScroll").scroll(function(){t||(i&&(clearTimeout(i),i=""),o=!0,i=setTimeout(function(){o=!1},500),l&&(clearTimeout(l),l=""),l=setTimeout(function(){n("original")}))}),$(window).scroll(function(){o||(a&&(clearTimeout(a),a=""),t=!0,a=setTimeout(function(){t=!1},500),l&&(clearTimeout(l),l=""),l=setTimeout(function(){n("translate")},50))})},init:function(){this.imgClick(),this.spanHover()}};return a});