webpackJsonp([13],{15:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){ydk.client?e(ydk.client):c.default.one("ydk.ready",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.autoHeight=t.autoSize=void 0,t.ready=a;var r=n(9),i=o(r),s=n(22),c=o(s),l=$("html"),d=window.devicePixelRatio||1;t.autoSize=_.throttle(function(){i.default.nextTick(function(){ydk.setWinSize({width:Math.ceil(l.width()*d),height:Math.ceil(l.height()*d)})})},100),t.autoHeight=_.throttle(function(){i.default.nextTick(function(){ydk.setWinHeight({height:Math.ceil(l.height()*d)})})},100)},28:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){$("._debug_msg").empty()}Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.stop=t.start=void 0,t.clear=a;var r=n(15),i=o(r);n(36);var s,c,l=function(e){clearTimeout(s),s=setTimeout(function(){e.fadeOut(500,function(){e.remove()})},5e3)},d=(t.start=function(){c=_.now()},t.stop=function(e,t){d([e,"：<em>",_.now()-(t||c),"</em> ms"])},t.log=function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i.ready(function(t){if(t.debug){var n=$("._debug_msg");0==n.length&&(n=$('<div class="_debug_msg"></div>'),$("body").append(n)),n.append("<p>"+(_.isArray(e)?e.join(""):e)+"</p>"),l(n)}})});$(function(){i.ready(function(e){e.debug&&$("body").on("mouseenter","._debug_msg",function(){clearTimeout(s)}).on("mouseleave","._debug_msg",function(){l($(this))})})})},36:function(e,t){},38:function(e,t){"use strict";$(function(){var e,t,n=window,o=function(n){e&&e.removeClass("active"),t&&t.hide().removeClass("active").removeAttr("onpannel").trigger("close"),e=null,t=null};$("body").on("click","[pannel]",function(n){var a=$(this),r=$(a.attr("pannel"));r.is(":visible")?o():(o(),_.delay(function(){r.show().attr("onpannel","1"),e=a.addClass("active"),t=r.addClass("active").trigger("open")}))}).on("click","[onpannel]",function(e){e.stopPropagation()}).on("click","[pannel-close]",function(e){o()}).bind("click",o).bind("mousedown",function(e){0!=e.button&&o()}),$(n).bind("blur",o)})},67:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=a(r),s=n(72),c=o(s),l=n(6),d=o(l);n(38);var u=function(e){var t=decodeURI(location.hash),n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=t.indexOf("?")+1,a=t.substring(o),r=a.match(n);return null!=r?unescape(r[2]):null};$("html"),$(document);t.default={data:function(){return{keyword:u("keyword"),lang:u("lang"),setting:d.getDefault(),categoryText:"",category:"",isAdd:!1,trans:"",phonetic:"",newCategory:null,plan:!1,progress:null,editIdx:u("editIdx")}},filters:{phoneticFilter:function(e){if(e)return e.replace(/\[|]/g,"")}},created:function(){ydk.setWinSize({width:480,height:405,type:"Wordbook"})},methods:c,mounted:function(){var e=this;d.get(function(t){e.setting=t}),ydk.queryWordBookCategory({success:function(t){e.category=t.data}}),ydk.checkWordBook({word:e.keyword,lang:e.lang,success:function(t){t.has?(console.log(t),e.trans=t.data.trans,e.phonetic=e.$options.filters.phoneticFilter(t.data.phonetic),e.categoryText=t.data.category,e.progress=t.data.progress,t.data.progress!=-1&&(e.plan=!0)):ydk.getDictResult({data:{keyword:e.keyword,lang:"en",type:"quick"},success:function(t){var n,o=t.data;o.basic&&o.basic.length>0?n=o.basic:o.web&&o.web.length>0&&(n=[],o.web.forEach(function(e){(0,i.default)(e).forEach(function(t){n.push(t+" ："+e[t].join(","))})})),e.trans=n?n.join("\n"):"",o.ussm||o.uksm?e.phonetic="us"==e.setting.content.pronounce_type?o.ussm:o.uksm:e.phonetic=o.sm||""}})}})}}},72:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){var e=this,t=e.keyword,n=e.lang||"en",o=e.trans,a=e.phonetic||"",r="未分组"==e.categoryText?"":e.categoryText,i=-1;o.length<3e3&&a.length<60?ydk.checkWordBook({word:t,lang:n,success:function(s){f.log(["res.has：<em>",s.has,"</em>"]),i=s.data?s.data.progress:-1,0==e.plan?(i=-1,ydk.setWordBookPlan({data:[{word:t,lang:n}],plan:!1})):1==e.plan&&1==i&&ydk.setWordBookPlan({data:[{word:t,lang:n}],plan:!0});var c={word:t,lang:n,trans:o,phonetic:a,category:r,progress:i};s.has?(ydk.updateToWordBook(c),g.emit("wordbook.update",{word:t,lang:n,trans:o,phonetic:a,category:r,progress:i,editIdx:e.editIdx},"all"),ydk.rlog({action:"dict_edit_wordbook",type:"edit",keyword:e.keyword,le:e.lang}),ydk.closeWin({type:"Wordbook"})):(e.$toast.show({text:"该单词不在单词本中哦",type:"warn"}),c.plan=$("input[name=revise]").is(":checked"),ydk.addToWordBook(c),ydk.closeWin({type:"Wordbook"}),ydk.rlog({action:"dict_edit_wordbook",type:"add",keyword:e.keyword,le:e.lang}))}}):(o.length>3e3&&e.$toast.show({text:"释义文字长度不能大于3000",type:"warn"}),a.length>60&&e.$toast.show({text:"发音字符长度不能大于60",type:"warn"}))}function r(){ydk.closeWin({type:"Wordbook"})}function i(e){var t=this;t.isAdd=!1,t.categoryText=e}function s(e){var t=this;t.isAdd=!1}function c(){var e=this;e.isAdd=!e.isAdd}function l(e){var t=this,n=!1,o=t.newCategory,a="分组命名重复了哦";if(13==e.keyCode&&null!=o){if(t.newCategory="",_.each(t.category,function(e){e.name==o&&(n=!0)}),_.each(t.category,function(e){e.name==o?n=!0:"未分组"!=o&&"所有分组"!=o&&"未分组单词"!=o||(a="不能取该分组名",n=!0)}),n)return void t.$toast.show({text:a,type:"warn"});if(o.length<1)return;ydk.addWordBookCategory({name:o}),null==t.category&&(t.category=[]),t.category.splice(0,0,{name:o}),t.categoryText=o}}function d(){var e=this;e.isAdd=!1}function u(){var e=this;ydk.removeFromWordBook({data:[{word:e.keyword,lang:e.lang}]}),ydk.rlog({action:"dict_add_wordbook",keyfrom:"deskdict.main",type:"delete",le:e.lang}),g.emit("wordbook.remove",{favor:!1},"all"),ydk.closeWin({type:"Wordbook"})}Object.defineProperty(t,"__esModule",{value:!0}),t.editComfirm=a,t.closeWin=r,t.selectSort=i,t.onCategoryCancel=s,t.toggleAdd=c,t.submit=l,t.onPannelClose=d,t.removeFromWordbook=u;var p=n(12),g=o(p),y=n(28),f=o(y)},82:function(e,t){},83:function(e,t,n){n(82);var o=n(1)(n(67),n(84),"data-v-21547202",null);e.exports=o.exports},84:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"wb-alert wb-word-opt"},[n("ul",[n("li",[n("label",[e._v("单词"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"g-input-text",attrs:{type:"text",readonly:"readonly"},domProps:{value:e.keyword},on:{input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),e._v(" "),n("a",{staticClass:"btn-remove btn",attrs:{href:"javascript:;"},on:{click:e.removeFromWordbook}},[e._v("从单词本中删除")])])]),e._v(" "),n("li",{staticClass:"category"},[n("label",[e._v("分组"),n("div",{staticClass:"sort-select ellipsis",attrs:{pannel:"#js_category_add"}},[n("span",[e._v(e._s(e.categoryText||"未分组"))]),n("span",{staticClass:"icon icon-down"})])]),e._v(" "),n("div",{staticClass:"pannel-add hide",attrs:{id:"js_category_add"}},[n("div",{staticClass:"category-wrap"},[n("ul",{attrs:{"pannel-close":""}},[n("li",{class:{active:""==e.categoryText}},[n("label",{on:{click:function(t){return e.selectSort("")}}},[e._v("未分组")])]),e._v(" "),e._l(e.category,function(t){return n("li",{class:{active:e.categoryText==t.name}},[n("label",{on:{click:function(n){return e.selectSort(t.name)}}},[e._v(e._s(t.name))])])})],2)]),e._v(" "),n("div",{staticClass:"category-create"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newCategory,expression:"newCategory",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"创建新分组，按回车键保存"},domProps:{value:e.newCategory},on:{keydown:function(t){return e.submit(t)},input:function(t){t.target.composing||(e.newCategory=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),e._v(" "),n("li",[n("label",[e._v("音标"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.phonetic,expression:"phonetic"}],staticClass:"g-input-text",attrs:{type:"text",maxlength:"63"},domProps:{value:e.phonetic},on:{input:function(t){t.target.composing||(e.phonetic=t.target.value)}}})])]),e._v(" "),n("li",[n("label",[e._v("释义"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.trans,expression:"trans"}],staticClass:"g-textarea",attrs:{type:"textarea"},domProps:{value:e.trans},on:{input:function(t){t.target.composing||(e.trans=t.target.value)}}})])])]),e._v(" "),n("div",{staticClass:"add-revise"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.plan,expression:"plan"}],staticClass:"g-checkbox all-select",attrs:{type:"checkbox",name:"revise"},domProps:{checked:e.plan,checked:Array.isArray(e.plan)?e._i(e.plan,null)>-1:e.plan},on:{change:function(t){var n=e.plan,o=t.target,a=!!o.checked;if(Array.isArray(n)){var r=null,i=e._i(n,r);o.checked?i<0&&(e.plan=n.concat([r])):i>-1&&(e.plan=n.slice(0,i).concat(n.slice(i+1)))}else e.plan=a}}}),e._v("加入复习计划")])]),e._v(" "),n("div",{staticClass:"wb-btn clear-fix"},[n("a",{staticClass:"g-btn-normal btn cancel",attrs:{href:"javascript:;"},on:{click:e.closeWin}},[e._v("取消")]),e._v(" "),n("a",{staticClass:"g-btn-red btn confirm",attrs:{href:"javascript:;"},on:{click:e.editComfirm}},[e._v("确定")])])])])},staticRenderFns:[]}}});